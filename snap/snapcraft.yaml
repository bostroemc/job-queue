name: job-queue
version: 1.0.1
summary: Python-based queue for Rexroth ctrlX AUTOMATION platform 
# title: SDK-Python
description: 'job-queue provides functionality specific to the Rexroth mechatronics demo
'
base: core18
confinement: strict
grade: stable

architectures:
  - build-on: arm64
  - build-on: amd64

apps:
  interpreter:
    command: python3
    plugs:
      - network-bind
      - network-observe
      - serial-port

  provider:
    command: ./wrapper/register_job_queue
    plugs:
      - network-bind
      - network-status
    daemon: simple

  #jupyter:
  #  command: jupyter-notebook --allow-root
  #  plugs:
   #   - network-bind
   #   - network-status
   #   - network-observe
   #   - serial-port

parts:
  interpreter:
    plugin: python
    python-version: python3
    source: .
    #python-packages:
      #- jupyter
    stage-packages:
      - jsonschema

  provider:
    plugin: python
    python-version: python3
    source: .
    python-packages:
      - ./whl/ctrlx_datalayer-1.0.1-py3-none-any.whl

  files:
    plugin: dump
    source: . 

# describes which interface slots are supported by defining the plugs
plugs:
  datalayer:
    interface: content
    content: datalayer
    target: $SNAP_DATA/.datalayer 
